fn getAsciiCodes(str: string) {
    return str.split(" ").map(fn(x) {
        const wordCodes = array(x).map(fn (y) {
            return asciiCode(y)
        })
        return wordCodes
    })
}

fn getAsciiCodesRaw(str: string) {
    const words = str.split(" ")
    const result = []
    for word in words {
        const wordCodes = []
        for char in array(word) {
            wordCodes.append(asciiCode(char))
        }
        result.append(wordCodes)
    }
    return result
}


echo(getAsciiCodesRaw("Hello worlda"))


fn benchmark() {
    const testString = "The quick brown fox jumps over the lazy dog"
    const iterations = 10000

    const start1 = perfCounter()
    for i in 0:iterations {
        getAsciiCodes(testString)
    }
    const end1 = perfCounter()
    const time1 = end1 - start1

    const start2 = perfCounter()
    for i in 0:iterations {
        getAsciiCodesRaw(testString)
    }
    const end2 = perfCounter()
    const time2 = end2 - start2

    echo("Functional version time: {}s".format(time1))
    echo("Imperative version time: {}s".format(time2))
    echo("Difference: {}s ({:.2f}%)".format(time1 - time2, (time1/time2 - 1) * 100))
}

benchmark()
